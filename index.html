<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VAZapp</title>

<!-- PWA -->
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#000000">

<style>
body{margin:0;font-family:Arial;background:#111;color:#fff}
.hidden{display:none}

/* Splash */
#splash{
position:fixed;inset:0;background:black;
display:flex;align-items:center;justify-content:center;
z-index:9999;
}
#logo{
font-size:48px;font-weight:bold;
animation:pulse 2s infinite;
}
#logo span{color:#00f0ff;text-shadow:0 0 20px #00f0ff}

@keyframes pulse{
0%{opacity:.5}
50%{opacity:1}
100%{opacity:.5}
}

/* Layout */
header{background:#000;padding:10px;text-align:center}
nav button{margin:5px;padding:8px}

section{padding:10px}

/* Stories */
#stories{display:flex;gap:10px;overflow-x:auto}
.story{
width:80px;text-align:center;cursor:pointer
}
.story img,.story video{
width:70px;height:70px;border-radius:50%;object-fit:cover;border:2px solid #0ff
}

/* Feed */
.post{background:#222;margin:10px 0;padding:10px;border-radius:8px}
.post img,.post video{
width:100%;max-height:300px;object-fit:cover;border-radius:6px
}

/* Chat */
#chatBox{height:300px;overflow-y:auto;background:#000;padding:5px}
.msg{margin:5px}
.user{color:#0ff}
.ai{color:#0f0}

/* Profile */
#profile img{width:100px;height:100px;border-radius:50%;object-fit:cover}
</style>
</head>
<body>

<!-- Splash -->
<div id="splash">
<div id="logo"><span>VAZ</span>app</div>
</div>

<header>
<h2>VAZapp</h2>
<nav>
<button onclick="show('home')">Home</button>
<button onclick="show('chat')">vazAI</button>
<button onclick="show('profile')">Profile</button>
</nav>
</header>

<!-- Home -->
<section id="home">
<h3>Stories</h3>
<div id="stories"></div>

<h3>Feed</h3>
<div id="feed"></div>

<hr>
<h3>Add Story</h3>
<input type="file" id="storyFile"><br>
<button onclick="addStory()">Post Story</button>
</section>

<!-- Chat -->
<section id="chat" class="hidden">
<h3>vazAI</h3>
<div id="chatBox"></div>
<input id="chatInput" placeholder="Type...">
<button onclick="sendMsg()">Send</button>
</section>

<!-- Profile -->
<section id="profile" class="hidden">
<h3>Profile</h3>
<img id="pfp"><br>
<input type="file" id="pfpFile"><br>
<input id="username" placeholder="Username"><br>
<button onclick="saveProfile()">Save</button>
</section>

<script>
/* Splash */
setTimeout(()=>{
document.getElementById('splash').style.display='none'
},2500)

/* Navigation */
function show(id){
document.querySelectorAll('section').forEach(s=>s.classList.add('hidden'))
document.getElementById(id).classList.remove('hidden')
}

/* Profile */
let profile=JSON.parse(localStorage.getItem('profile')||'{}')
if(profile.name)document.getElementById('username').value=profile.name
if(profile.img)document.getElementById('pfp').src=profile.img

function saveProfile(){
let name=username.value
let file=pfpFile.files[0]
if(file){
let r=new FileReader()
r.onload=()=>{
profile={name, img:r.result}
localStorage.setItem('profile',JSON.stringify(profile))
pfp.src=r.result
}
r.readAsDataURL(file)
}else{
profile.name=name
localStorage.setItem('profile',JSON.stringify(profile))
}
}

/* Stories */
let stories=JSON.parse(localStorage.getItem('stories')||'[]')

/* Fake Stories */
const fakeStories=[
{
user:'NHL',
type:'image',
media:'mcdavid.png',
text:'Connor McDavid scores 2 goals vs Flames'
},
{
user:'NHL',
type:'gif',
media:'leafs.gif',
text:'Maple Leafs win overtime vs Bruins'
},
{
user:'NHL',
type:'gif',
media:'rangers.gif',
text:'Rangers celebrate playoff spot at MSG'
}
]

function loadStories(){
let box=document.getElementById('stories')
box.innerHTML=''

let now=Date.now()
stories=stories.filter(s=>now-s.time<86400000)
localStorage.setItem('stories',JSON.stringify(stories))

fakeStories.forEach(addStoryUI)
stories.forEach(addStoryUI)
}

function addStoryUI(s){
let d=document.createElement('div')
d.className='story'

let m
if(s.type==='video'){
m=document.createElement('video')
m.src=s.media;m.autoplay=true;m.loop=true
}else{
m=document.createElement('img')
m.src=s.media
}

d.appendChild(m)
d.innerHTML+=`<div>${s.user}</div>`
d.onclick=()=>viewStory(s)

document.getElementById('stories').appendChild(d)
}

function viewStory(s){
alert(s.user+"\n"+s.text)
}

function addStory(){
let f=document.getElementById('storyFile').files[0]
if(!f)return

let r=new FileReader()
r.onload=()=>{
stories.push({
user:profile.name||'You',
type:f.type.startsWith('video')?'video':'image',
media:r.result,
text:'My story',
time:Date.now()
})
localStorage.setItem('stories',JSON.stringify(stories))
loadStories()
}
r.readAsDataURL(f)
}

/* Feed */
function loadFeed(){
let f=document.getElementById('feed')
f.innerHTML=''

fakeStories.forEach(p=>addPost(p))
stories.forEach(p=>addPost(p))
}

function addPost(p){
let d=document.createElement('div')
d.className='post'

let media
if(p.type==='video'){
media=`<video src="${p.media}" controls></video>`
}else{
media=`<img src="${p.media}">`
}

d.innerHTML=`
<b>${p.user}</b><br>
${media}
<p>${p.text}</p>
`

feed.appendChild(d)
}

/* Chat */
function sendMsg(){
let t=chatInput.value
if(!t)return

addChat('user',t)
chatInput.value=''

setTimeout(()=>{
let r=aiReply(t)
addChat('ai',r)
},600)
}

function addChat(type,text){
let d=document.createElement('div')
d.className='msg '+type
d.innerHTML=`<b>${type}:</b> ${text}`
chatBox.appendChild(d)
chatBox.scrollTop=9999
}

function aiReply(q){
q=q.toLowerCase()

if(q.includes('hello'))return'Hey! What’s up?'
if(q.includes('sports'))return'I love hockey. Did you see McDavid last night?'
if(q.includes('help'))return'I’m here. Ask me anything.'
if(q.includes('name'))return'I’m vazAI.'

return"Interesting. Tell me more about that.";
}

/* Init */
loadStories()
loadFeed()

/* Service Worker */
if('serviceWorker'in navigator){
navigator.serviceWorker.register('sw.js')
}
</script>

</body>
</html>
