<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VAZapp</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="manifest" id="manifestPlaceholder">
<meta name="theme-color" content="#000000">

<style>
body{font-family:Arial,sans-serif;transition:.3s}
.dark{background:#000;color:#fff}

/* Splash */
@keyframes auraGlow{
0%,100%{text-shadow:0 0 10px #0ff,0 0 25px #0ff}
50%{text-shadow:0 0 40px #0ff,0 0 60px #0ff}
}

.logo-animation{
position:fixed;
inset:0;
display:flex;
justify-content:center;
align-items:center;
background:#000;
z-index:9999;
font-size:3rem;
font-weight:bold;
transition:opacity 1.5s ease;
}

.logo-animation .highlight{color:#0ff;animation:auraGlow 2s infinite}
.logo-animation .app{color:#fff;font-weight:900}

/* Stories Shorts Layout */
#storiesFeed{
height:100vh;
overflow-y:scroll;
scroll-snap-type:y mandatory;
background:black;
}

.story-item{
height:100vh;
scroll-snap-align:start;
display:flex;
flex-direction:column;
justify-content:center;
align-items:center;
color:white;
position:relative;
}

.story-item img,.story-item video{
max-height:85vh;
max-width:100%;
object-fit:contain;
border-radius:12px;
}

.story-caption{
position:absolute;
bottom:60px;
left:15px;
font-size:1rem;
bold:700;
max-width:90%;
}
</style>
</head>

<body id="body" class="bg-gray-100 min-h-screen flex flex-col">

<!-- Splash -->
<div id="logoAnimation" class="logo-animation">
<span><span class="highlight">VAZ</span><span class="app">app</span></span>
</div>

<!-- Header -->
<header class="bg-blue-600 text-white p-4 flex justify-between">
<h1 class="font-bold text-xl">VAZapp</h1>
<div class="space-x-2">
<button onclick="showChat()" class="bg-blue-500 px-3 py-1 rounded">Chat</button>
<button onclick="showStories()" class="bg-blue-500 px-3 py-1 rounded">Stories</button>
<button onclick="showProfile()" class="bg-blue-500 px-3 py-1 rounded">Profile</button>
<button onclick="toggleDark()" class="bg-gray-800 px-3 py-1 rounded">ðŸŒ™</button>
</div>
</header>

<main class="flex-1 flex justify-center items-start">

<!-- Chat -->
<div id="chatPage" class="bg-white w-full max-w-xl p-4 rounded shadow flex flex-col">
<div class="flex items-center gap-2 mb-2">
<img id="chatAvatar" class="w-8 h-8 rounded-full" src="https://via.placeholder.com/40">
<span id="chatName" class="font-bold">Guest</span>
</div>
<div id="chat" class="flex-1 border p-2 rounded mb-2 overflow-y-auto"></div>
<div class="flex gap-2">
<input id="userInput" class="flex-1 border p-2 rounded" placeholder="Type...">
<button onclick="sendMessage()" class="bg-blue-600 text-white px-3 rounded">Send</button>
</div>
</div>

<!-- Stories -->
<div id="storiesPage" class="hidden w-full">
<div id="storiesFeed"></div>
</div>

<!-- Profile -->
<div id="profilePage" class="hidden bg-white w-full max-w-md p-4 rounded shadow">
<h2 class="text-xl font-bold mb-3">Profile</h2>
<img id="profilePreview" class="w-24 h-24 rounded-full mx-auto mb-2" src="https://via.placeholder.com/120">
<input type="file" accept="image/*" onchange="loadImage(event)"><br><br>
<input id="usernameInput" class="border p-2 w-full mb-2" placeholder="Username">
<button onclick="saveProfile()" class="bg-blue-600 text-white w-full p-2 rounded">Save</button>
</div>

</main>

<footer class="bg-gray-200 p-2 text-center text-sm">Â©2026 VAZapp</footer>

<script>

/* Splash */
window.addEventListener("load",()=>{
 const logo=document.getElementById("logoAnimation");
 setTimeout(()=>{
  logo.style.opacity="0";
  setTimeout(()=>logo.remove(),1600);
 },2000);
});

/* PWA */
const manifest={
 name:"VAZapp",
 short_name:"VAZapp",
 start_url:".",
 display:"standalone",
 background_color:"#000",
 theme_color:"#000",
 icons:[
  {src:"icon192.png",sizes:"192x192",type:"image/png"},
  {src:"icon512.png",sizes:"512x512",type:"image/png"}
 ]
};

const blob=new Blob([JSON.stringify(manifest)],{type:"application/json"});
document.getElementById("manifestPlaceholder").href=URL.createObjectURL(blob);

if("serviceWorker" in navigator){
 navigator.serviceWorker.register("data:text/javascript,self.addEventListener('fetch',e=>{})");
}

/* NAV */
const chatPage=document.getElementById("chatPage");
const storiesPage=document.getElementById("storiesPage");
const profilePage=document.getElementById("profilePage");

function showChat(){chatPage.classList.remove("hidden");storiesPage.classList.add("hidden");profilePage.classList.add("hidden");}
function showStories(){storiesPage.classList.remove("hidden");chatPage.classList.add("hidden");profilePage.classList.add("hidden");renderStories();}
function showProfile(){profilePage.classList.remove("hidden");chatPage.classList.add("hidden");storiesPage.classList.add("hidden");}

/* Dark */
function toggleDark(){body.classList.toggle("dark");}

/* Profile */
function loadImage(e){
 const r=new FileReader();
 r.onload=()=>profilePreview.src=r.result;
 r.readAsDataURL(e.target.files[0]);
}

function saveProfile(){
 localStorage.vaz_user=usernameInput.value||"Guest";
 localStorage.vaz_avatar=profilePreview.src;
 loadProfile();
 showChat();
}

function loadProfile(){
 chatName.textContent=localStorage.vaz_user||"Guest";
 usernameInput.value=localStorage.vaz_user||"";
 if(localStorage.vaz_avatar){
  chatAvatar.src=localStorage.vaz_avatar;
  profilePreview.src=localStorage.vaz_avatar;
 }
}

/* Chat AI */
function addMsg(t,s){
 const d=document.createElement("div");
 d.className=s==="u"?"text-right text-blue-500":"text-left text-green-500";
 d.textContent=(s==="u"?"You: ":"vazAI: ")+t;
 chat.appendChild(d);
 chat.scrollTop=chat.scrollHeight;
}

function sendMessage(){
 const t=userInput.value.trim();
 if(!t)return;
 addMsg(t,"u");
 userInput.value="";
 setTimeout(()=>addMsg(ai(t),"a"),600);
}

userInput.onkeydown=e=>{if(e.key==="Enter")sendMessage()};

function ai(m){
 m=m.toLowerCase();
 if(m.includes("who is"))return "Let me explain that clearly for you.";
 if(m.includes("how"))return "Here is how it works step by step.";
 if(m.includes("help"))return "Tell me exactly what you need.";
 if(/\d+[+\-*/]\d+/.test(m))return "Answer: "+eval(m);
 return "Ask me anything and Iâ€™ll try my best.";
}

/* Stories */
let stories=JSON.parse(localStorage.vaz_stories||"[]");

const fakeStories=[
{
 user:"NHL",
 src:"mcdavid.png",
 type:"image",
 text:"Connor McDavid scores 2 goals vs Flames in Battle of Alberta"
},
{
 user:"MapleLeafs",
 src:"leafs.gif",
 type:"video",
 text:"Toronto Maple Leafs win overtime vs Bruins at Scotiabank Arena"
},
{
 user:"NYRangers",
 src:"rangers.gif",
 type:"video",
 text:"New York Rangers celebrate playoff spot at Madison Square Garden"
},
{
 user:"WorldNews",
 src:"news.gif",
 type:"video",
 text:"Breaking: Massive storm hits Florida coastline overnight"
}
];

function loadFakeStories(){
 if(!localStorage.vaz_fake_loaded){
  fakeStories.forEach(s=>{
   stories.unshift({
    id:Date.now()+Math.random(),
    user:s.user,
    src:s.src,
    mediaType:s.type,
    text:s.text
   });
  });
  localStorage.vaz_fake_loaded="true";
  saveStories();
 }
}

function saveStories(){
 localStorage.vaz_stories=JSON.stringify(stories);
}

function renderStories(){
 storiesFeed.innerHTML="";
 stories.forEach(s=>{
  const d=document.createElement("div");
  d.className="story-item";

  let media="";

  if(s.mediaType==="image"){
   media=`<img src="${s.src}">`;
  }else{
   media=`<video src="${s.src}" autoplay loop muted playsinline></video>`;
  }

  d.innerHTML=`
   <div class="absolute top-5 left-5 font-bold">${s.user}</div>
   ${media}
   <div class="story-caption">${s.text}</div>
  `;

  storiesFeed.appendChild(d);
 });
}

/* Init */
function init(){
 loadProfile();
 loadFakeStories();
 addMsg("Hi! I'm vazAI ðŸ¤–","a");
}

init();

</script>
</body>
</html>
